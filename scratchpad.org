#+OPTIONS:     H:3 num:nil toc:nil \n:nil ::t |:t ^:nil -:nil f:t *:t <:t reveal_title_slide:nil
#+REVEAL_THEME: solarized
#+REVEAL_ROOT: ./reveal.js-3.8.0

* FOO

* Dwarlixir

** Brief intro
- did NOΤ understand how to think in Erlang/Elixir
- all about mistakes
** What's a MUD

** Erlmud
https://gitlab.com/zxq9/erlmud/
** What's Dwarf Fortress
** game of life-style
*** | c9f6725 | Dwarves have X, Y coordinates and have a Registry (this is pre-Registry)
** decentralized / many ticks
*** | 48fc61e | Dwarves use :timer.send_interval to send themselves a ping and move to new coordinates
** a world map
*** | 576e3f4 | Create a "world" that knows if a location is taken by a dwarf
*** | 0d2b2ed | Faker, because names are important
*** | 7b67cff | use built-in Registry finally
- got a world
- when spinning up a dwarf, ask the world process to store its location
- moving a dwarf is ~World.move(dwarf)~
** pausing the game
*** | 80e2ba8 | pause the game!
- more registries can't hurt, right?
- The time registry now has a heartbeat which Ι could stop -- it sends every creature a message telling it to do its thing.
- I have timers! They hold heartbeats! They can be stopped! Wait, that sounds murderous.
** ets sounds cool
*** | 0a823a6 | Use ets for locations (because that's cool, right?)
- oh god what's with those matchspecs
- ex2ms? oh good Ι don't have to figure too much out
** dwarves can die
*** | ad91c0c | dwarves can die
** deadlock! uncontrolled synchronous calls
*** | f447f85 | nyaaargg
Looking for mates of the other sex through "world neighbors", synchronous calls to dwarves
DEADLOCKS!
** Read erlmud
*** | 11e90b6 | the baby version of locations and pathways
Okay Ι get it, async is better
*** | 317c908 | location spawns pathways
*** | 69a2079 | Registries everywhere! aaarrghh
Well, LocationRegistry and PathwayRegistry
** Back to "the game works?"
*** | 12ad608 | Tick works, moving works
Dwarves get a tick sent to them and they do stuff
... I also introduce an API in World.Location
*** | ec5d258 | very rudimentary controller implemented
Beginning of separation of business logic from, er ... framework logic?
*** | deb19d0 | Create a generic mob controller
Oh, a "human" controller with output and a mob controller with "AI"
** Okay, back to reproduction
*** | 995202a | Preparing for mating
only 10% chance to flirt, should help, right?
Right?
Helloooo ?
*** | aeff220 | They breed like rabbits
... the introduction of "pregnantize" because English is hard
** "Death" - the reaper process
*** | 6222d17 | dwarves really die now
** Use a single tick through a registry to send a tick to everyone
*** | 90343d4 | god tick, I guess
** human controller receives messages
*** | 9bb4c6b | some message passing is happening...
*** | 3995153 | well there's messages
Location.depart and Location.arrive
** First test - end-to-end through telnet
*** | f98a561 | integration test for telnet?
**  distributed code and synchronized state is HARD
*** | a9dedc1 | locs and mobs get out of sync :(
Hrm.. What am I doing here, what's broken?
* Foo
 unchecked git commits

| 1911f7f | extract currently common mob functionality                          |
| e0ccac8 | I think Ι need a proper two-phase commit                            |
| 7d0c748 | I see when mobs leave and arrive                                    |
| 2d54d24 | remove some commented code                                          |
| 9b2b309 | unregister corpse when it poofs away                                |
| 2b16c5a | maybe a mob just wants to stay where it is                          |
| 5e7afcd | Randomly generated graph and World.overview admin command           |
| adc0adf | can't move yet but.. more commands .. And a welcome prompt of sorts |
| f3857e8 | The cost of UX, man. The cost of UX.                                |
| a020923 | unregister a human controller on quit                               |
| a821292 | oh that might not be needed                                         |
| 4511e92 | human movement works                                                |
| 8fb8229 | just give the mobs the exits, too                                   |
| 40abfa3 | bunch of new commands                                               |
| fecd9c4 | a small tweak to algo yields perf boost                             |
| e4600ed | fix defect where people couldn't move                               |
| bc85fe1 | hopefully fix defect for colorless tables                           |
| fd7838a | do not want a big random world right now                            |
| 0a03d3d | update mix.lock                                                     |
| ca06ba5 | remove code in pathway for movement                                 |
| f376d8f | better name                                                         |
| e1b1c2b | arguably improved design                                            |
| 7e27f8d | add distillery                                                      |
| 9479d44 | I bow to the genserver gods                                         |
| fb6acf6 | foo                                                                 |
| 44d5c6d | 0.1.0 releasing test                                                |
| b2d6b36 | 0.1.1 fixing warnings, release test two                             |
| 69b490d | green build                                                         |
| 6844c44 | commented out metaprog code                                         |
| 48780ba | mark log level as info mobs default config                          |
| 306b7d5 | 0.1.2 artificial population cap per room                            |
| 3a640a8 | Okay, fifteen mobs is enough thanks                                 |
| f861f30 | better departure message for humans.                                |
| e34d2fc | add a todo. best commit ever.                                       |
| 1bbd855 | if a location dies, it respawns no matter what                      |
| 6961c4b | Use OTP process termination when a mob dies                         |
| 8f696c3 | This is probably how locs should die                                |
| a5dd705 | better if tests pass with no errors                                 |
| ed8e590 | 0.1.7 0.1.6 back to a mob spawning supervisor                       |
| 18dcbf7 | update distillery                                                   |
| 2e7e710 | have Elixir's logger send its log to files                          |
| 4cb8d0d | move file-logging to umbrella level                                 |
| 92a3aee | enable sasl binary logs                                             |
| a8c684d | add empty ecosystem app                                             |
| 87cb478 | begin genevent                                                      |
| ac8e5a9 | 0.2.0 there's an ecosystem in the house                             |
| c9f5130 | 0.2.1 fix some compilation errors because I have no tests           |
| 1f1c8bc | 0.2.2 attempt to move logger file backend up the tree               |
| e222928 | Slight rewrite of random map generator                              |
| a0b73b6 | ignore log files                                                    |
| a4f503c | tests please                                                        |
| 68268b0 | maybe this will make the logs all go to the one directory           |
| 454e39d | 0.2.3 maybe now color will work                                     |
| aec5750 | 0.3.0 not promising anything but maybe 100 ticks to birth           |
| dad4124 | keep tests green                                                    |
| 479cc41 | 0.4.0 buncha sync stuff is time-bound now                           |
| 44964e7 | unregister from registry last + refer to "items" in loc             |
| c795f13 | add test to make sure location respawns after death                 |
| 807efa6 | yay failing tests                                                   |
| c842b7d | well, tests pass                                                    |
| f5d1a8f | sexual reproduction: pregnant female doesn't mate                   |
| 07a5b2e | bird lays egg (flickers)                                            |
| 8c360c5 | prepare for code duplication removal                                |
| f0536c3 | better macro                                                        |
| ac94b12 | more todo documentation                                             |
| 8ae78c8 | more thoughts on macro                                              |
| fd2b2c7 | queues messages, nothing spawns                                     |
| ae1a550 | allow births again, oops                                            |
| a1f2926 | mob state in an agent                                               |
| d1f6671 | 0.4.2 0.4.1 er, will this ship?                                     |
| 063df76 | fix compilation warnings                                            |
| 801bbcd | set tool versions                                                   |
| e8d203a | make it work with Elixir 1.5                                        |
| ca3a51f | Update README.md                                                    |
| 46cb47e | add rel/config file                                                 |
| 99e369c | can save a generated world                                          |
| 39b27c8 | update distillery                                                   |
| d9500cb | update dependencies                                                 |
| cf614f6 | get rid of doc formatter library                                    |
| 2069aa5 | elixir 1.5.2, erlang 20.1                                           |
| cca1930 | Add MIT License                                                     |
| 69d4d0d | un-umbrella-appify                                                  |
| 20a1b5a | begin switching to ecstatic                                         |
| 4d356f6 | fix compilation errors                                              |
| 8138197 | plugs in pretty well to Ecstatic                                    |
| 2ae7c00 | watchers look like watchers                                         |
| 3715a6a | components use module attributes                                    |
| 585ddc0 | tick properly for aging                                             |
| 99b9b9b | move entities where they may belong                                 |
| 5299463 | update for elixir 1.8                                               |
| 51792c3 | ranch + clean up supervision tree                                   |
| e0a7ae3 | master origin/master okay, this is an echo server with a timeout    |
